http:
  services:
    main-service:
      loadBalancer:
        servers:
          - url: http://api:9999
  routers:
    basic_first-endpoint_ak0:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=7B5zIqmRGXmrJTFmKa99-b`)
      service: main-service
      middlewares:
        - basic_first-endpoint
        - basic_addApikeyHeader_ak0
    basic_first-endpoint_ak1:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=QzVV6y1EmQFbbxOfRCwy-b`)
      service: main-service
      middlewares:
        - basic_first-endpoint
        - basic_addApikeyHeader_ak1
    basic_first-endpoint_ak2:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=mGcjH8Fv6U9y3BVF9H3Y-b`)
      service: main-service
      middlewares:
        - basic_first-endpoint
        - basic_addApikeyHeader_ak2
    basic_second-endpoint_ak0:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=7B5zIqmRGXmrJTFmKa99-b`)
      service: main-service
      middlewares:
        - basic_second-endpoint
        - basic_addApikeyHeader_ak0
    basic_second-endpoint_ak1:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=QzVV6y1EmQFbbxOfRCwy-b`)
      service: main-service
      middlewares:
        - basic_second-endpoint
        - basic_addApikeyHeader_ak1
    basic_second-endpoint_ak2:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=mGcjH8Fv6U9y3BVF9H3Y-b`)
      service: main-service
      middlewares:
        - basic_second-endpoint
        - basic_addApikeyHeader_ak2
    pro_first-endpoint_ak0:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=qmFm7B5zIKa99vcitRGX-p`)
      service: main-service
      middlewares:
        - pro_first-endpoint
        - pro_addApikeyHeader_ak0
    pro_first-endpoint_ak1:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=RCwyJs35QzVV6y1EmQFb-p`)
      service: main-service
      middlewares:
        - pro_first-endpoint
        - pro_addApikeyHeader_ak1
    pro_first-endpoint_ak2:
      rule: PathPrefix(`/first-endpoint`) && Query(`apikey=H8Fv6UmGcj9y3Bb9TVF9-p`)
      service: main-service
      middlewares:
        - pro_first-endpoint
        - pro_addApikeyHeader_ak2
    pro_second-endpoint_ak0:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=qmFm7B5zIKa99vcitRGX-p`)
      service: main-service
      middlewares:
        - pro_second-endpoint
        - pro_addApikeyHeader_ak0
    pro_second-endpoint_ak1:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=RCwyJs35QzVV6y1EmQFb-p`)
      service: main-service
      middlewares:
        - pro_second-endpoint
        - pro_addApikeyHeader_ak1
    pro_second-endpoint_ak2:
      rule: PathPrefix(`/second-endpoint`) && Query(`apikey=H8Fv6UmGcj9y3Bb9TVF9-p`)
      service: main-service
      middlewares:
        - pro_second-endpoint
        - pro_addApikeyHeader_ak2
    open-endpoint:
      rule: >-
        PathPrefix(`/open-endpoint`) && (Query(`apikey=7B5zIqmRGXmrJTFmKa99-b`)
        || Query(`apikey=QzVV6y1EmQFbbxOfRCwy-b`) ||
        Query(`apikey=mGcjH8Fv6U9y3BVF9H3Y-b`) ||
        Query(`apikey=qmFm7B5zIKa99vcitRGX-p`) ||
        Query(`apikey=RCwyJs35QzVV6y1EmQFb-p`) ||
        Query(`apikey=H8Fv6UmGcj9y3Bb9TVF9-p`))
      service: main-service
  middlewares:
    basic_addApikeyHeader_ak0:
      headers:
        customRequestHeaders:
          apikey: 7B5zIqmRGXmrJTFmKa99-b
    basic_addApikeyHeader_ak1:
      headers:
        customRequestHeaders:
          apikey: QzVV6y1EmQFbbxOfRCwy-b
    basic_addApikeyHeader_ak2:
      headers:
        customRequestHeaders:
          apikey: mGcjH8Fv6U9y3BVF9H3Y-b
    basic_first-endpoint:
      rateLimit:
        sourceCriterion:
          requestHeaderName: apikey
        average: 1
        period: 1s
        burst: 1
    basic_second-endpoint:
      rateLimit:
        sourceCriterion:
          requestHeaderName: apikey
        average: 2
        period: 1m
        burst: 2
    pro_addApikeyHeader_ak0:
      headers:
        customRequestHeaders:
          apikey: qmFm7B5zIKa99vcitRGX-p
    pro_addApikeyHeader_ak1:
      headers:
        customRequestHeaders:
          apikey: RCwyJs35QzVV6y1EmQFb-p
    pro_addApikeyHeader_ak2:
      headers:
        customRequestHeaders:
          apikey: H8Fv6UmGcj9y3Bb9TVF9-p
    pro_first-endpoint:
      rateLimit:
        sourceCriterion:
          requestHeaderName: apikey
        average: 10
        period: 1s
        burst: 10
    pro_second-endpoint:
      rateLimit:
        sourceCriterion:
          requestHeaderName: apikey
        average: 20
        period: 1m
        burst: 20
