events {}
http {

    limit_req_zone $binary_remote_addr zone=once-per-second-endpoint:10m rate=1r/s;
    limit_req_zone $binary_remote_addr zone=twice-per-minute-endpoint:10m rate=2r/m;
    

    server {

      
        location /once-per-second-endpoint {
            proxy_pass http://api:9999;
            limit_req zone=once-per-second-endpoint;
        }

        location /twice-per-minute-endpoint {
            proxy_pass http://api:9999;
            limit_req zone=twice-per-minute-endpoint;
        }


    }
}
